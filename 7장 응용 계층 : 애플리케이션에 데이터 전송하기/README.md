# 7장. 응용계층 : 애플리케이션에 데이터 전송하기

## 역할

사용자와 맞닿아 있는 웹 브라우저와 이메일과 같은 클라이언트 측 서비스,
서비스를 제공하는 서버는 응용계층에서 동작한다.  
응용 계층은 애플리케이션이 동작하는 계층으로, 애플리케이션과 데이터를 주고 받기 위해 필요하다.  
(책에서는 TCP/IP 4계층처럼 세선,표현,응용 계층을 포함해 응용계층을 소개하고 있다.)  
응옹 계층은 **클라이언트의 요청을 전달하기** 위해 서버가 이해할 수 있는 **데이터로 변환하고**, 바로 **다음 계층** - 전송 계층 - **으로 데이터를 전달**하는 역할을 한다.

## 다양한 프로토콜

1. HTTP (HyperText Transfer Protocol) : 웹사이트를 볼 때
2. FTP (File Transfer Protocol) : 파일 전송
3. SMTP (Simple Mail Transfer Protocol) : 메일 전송
4. POP3 (Post Office Protocol version) : 메일을 받을 때
5. DNS (Domain Name System) : 이름으로 IP주소를 알아내야 할 때
   더 많지만, 자주 사용되는것은 위의 5개이다.

HTTP, DNS, FTP는 전송계층의 TCP로 가고 SMTP와 POP3는 UDP로 간다.

## 웹 사이트 접속

### www

제일 첫 시간에도 나왔던 www는 월드 와이드 웹으로, HTML,URL,HTTP 3가지 기술이 사용된다.  
웹 페이지 이동 시, html파일이나 이미지 파일이 웹 서버에서 전송되어 우리가 볼 수 있다.

### HTTP

클라이언트는 웹 사이트를 보기 위해서, 서버의 80포트 (well-known-port)를 통해 HTTP 통신을 한다.  
클라이언트는 request, 서버는 response를 반환한다.

여러 메소드가 있지만, get 메소드는 데이터 요청 시 사용된다. 서버가 성공적으로 응답을 한다면 상태값 200, ok라는 정보와 요청한 html을 클라이언트에게 전달한다.

### HTTP의 버전

1. HTTP/1  
   지금은 거의 사용되지 않는다.  
    요청을 보낼 때마다 연결했다가, 끊었다 하는 작업을 반복한다.

2. HTTP/1.1  
   `keepalive`기능이 추가되었다.
   한번 연결이 되면, 데이터교환을 마칠 때 까지 유지하고 끊는다.

3. HTTP/2
   지금까지의 HTTP는 요청-응답을 동기식으로 처리했는데, 요청에 대한 응답을 비동기로 처리 해 요청에 대한 처리가 빠르다. 요청을 보낸 순서대로 응답하지 않는다.

## DNS (name resolution)

`도메인 이름을 IP주소로 바꿔준다. 이것이`name resolution` `http://www.gilbut.co.kr`에서 www는 호스트 이름(서버 이름)이고 뒤의 gilbut이 도메인 이름이다.

**통신 순서:**  
브라우저를 통해 해당 주소에 접속하면, DNS서버와 통신해 IP를 알아내고, IP주소에 해당하는 웹서버에 접속한다. 만약 DNS서버에서 IP 주소를 모른다면 다른 DNS서버에 요청을 보내 IP 주소를 알아낸다. DNS 서버는 전 세계에 흩어져 있고, 모두 계층적으로 연결되어 있다.

## 메일 서버 (SMTP, POP3)

메일을 보내는데엔 SMTP, 받는데엔 POP3을 사용한다.

**SMTP 동작 흐름**

1. 세션 시작 통지
2. 보내는 이 메일 주소 통지
3. 목적지 주소 통지
4. 메일 본문 통지
5. 메일 본문 송신
6. 세션 종료

사용하는 단말을 이용해 SMTP로 메일 서버로 메일을 보내면, 메일 서버에서 또 서버로 SMTP로 전달해준다. 받을 때는 POP3를 이용한다.

**POP3 동작 흐름**

1. 세션 시작
2. 받는 사람 이름 통지
3. 받는 사람 비밀번호 통지
4. 메일 확인
5. 메일 전송 요청
6. 세션 종료

## ping 명령

목적지 컴퓨터와의 통신 시 사용한다. 정상인지 아닌지 알 수 있다.  
 ICMP (인터넷 컨트롤 메세지 프로토콜)을 사용해 목적지에 ICMP패킷을 전송하고, 응답을 통해 연결을 확인한다.  
 `ping 목적지ip`  
`ping 목적지호스트이름`  
으로 사용한다.
